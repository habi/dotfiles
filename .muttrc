# Set correct sender address and signature
set realname         = "David Haberthür"
set from             = "David Haberthür <david.haberthuer@psi.ch>"
set signature        = ~/.signature

# Set Inbox and SMTP server
set imap_user        = haberthuer
set imap_pass        = $imappass
set spoolfile        = imaps://mail.ethz.ch/INBOX
set folder           = imaps://mail.ethz.ch
set smtp_url         = smtp://mail.psi.ch:25/
set postponed        = =Drafts
set record           = "=Gesendete Objekte"
set trash            = "=Deleted Items"
set confirmappend    = no                         
set imap_keepalive   = 300

# Help with composing mails (some info from http://git.io/uRKPTA
set alias_file       = ~/.mutt/aliases
set sort_alias       = alias
set reverse_alias    = yes
source $alias_file
set editor           = "vim +':set textwidth=0' +':set wrapmargin=0' +':set wrap'"
set ispell           = "aspell -e -c"

# Replying, forwarding, saving mails
set askcc             = yes      # Ask for 'CC:'
set fast_reply        = yes      # Directly go to compose when replying, don't ask for subject
set include           = yes      # Include message in reply
set forward_edit      = ask-yes  # Automatically start editor when forwarding
set forward_quote     = yes      # Include message in forward
set mime_forward      = yes      # Forward files as attachments instead of inline
set mime_forward_rest = yes      # Always forward other attachments, too
set forward_decode    = no       # Don't decode MIME messages to text/plain when forwarding
set include           = yes      # Include message in reply
set reply_to          = yes      # Reply to 'Reply to:'
set confirmappend     = no       # Do not ask for confirmation when saving messages

# Bind to PSI LDAP, according to http://www.christianschenk.org/blog/integrating-ldap-into-mutt/
set query_command="lbdbq '%s'"

# Some general settings from http://dev.mutt.org/trac/wiki/MuttGuide/UseIMAP and other sources
set ssl_starttls     = yes            # activate TLS if available on the server
set mail_check       = 60             # Reduce polling frequency to a sane level
set header_cache     = ~/.mailcache   # Keep caches according to http://dev.mutt.org/trac/wiki/MuttGuide/Caching
set message_cachedir = ~/.mailcache   # ditto
set net_inc          = 5              # Display download progress every 5K
set delete           = yes            # Don't ask to delete, just do it.
set pager_stop       = yes            # Do not scroll jump into next message at the bottom of this message
bind editor <space> noop              # Allow for spaces in folder names: http://forums.debian.net/viewtopic.php?f=10&t=80626

# Display
set sort           = threads
set narrow_tree    = yes

# HTML emails stink
set implicit_autoview = yes
auto_view text/html

# HEADERS
ignore *                                     # Ignore all headers
unignore from: to: cc: bcc: date: subject:   # Do NOT ignore these
hdr_order from: to: cc: bcc: date: subject:  # In this order please
# FORMATS & EDITOR
set forward_format = "Fwd: %s"
set index_format   = "%Z | %-16.16L | %s"
set status_format  = "-%r- %v ---[Folder: %f, Msgs: %m%?n? New: %n?%?d? Del: %d?%?t? Tag: %t?%?l? %l? ]%?p?---- .: %p waiting to send :. ?--%>- (%P) ---"

# pretty-print
set print_command  = muttprint

# Solarize this shit!
source ~/.mutt/mutt-colors-solarized-dark-16.muttrc

# Key bindings
bind index G imap-fetch-mail  # http://unix.stackexchange.com/a/49986
